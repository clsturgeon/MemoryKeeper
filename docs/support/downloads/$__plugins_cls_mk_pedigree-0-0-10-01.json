[{"created":"20220201012346633","text":"\\define showno(spouse)\n<span style=\"color: red\">Person <span style=\"font-weight: bold !important;\"><<ot>></span> has spouse <span style=\"font-weight: bold !important;\">{{!!title}}</span> identified, but found [[$spouse$]] without <span style=\"font-weight: bold !important;\"><<ot>></span> identified as a spouse.</span><br/>\n<$vars title={{!!title}}>\n<$set name=\"spouse\" value=<<ot>> >\n<$button tooltip=\"Update spouse field for $spouse$\" actions=<<appendfieldaction>>>\n{{$:/core/images/link}} Update <span style=\"font-weight:bold\">$spouse$</span> to reference <span style=\"font-weight:bold\"><<ot>></span> as a spouse\n</$button></$set></$vars><br/><br/>\n\\end\n\n\\define nospouse(spouse)\n<span style=\"color: red\">Person <span style=\"font-weight: bold !important;\">{{!!title}}</span> has spouse <span style=\"font-weight: bold !important;\"><<slist>></span> identified, but [[$spouse$]] tiddler was not found.</span><br/>\n<$vars title=<<slist>>>\n<$set name=\"tags\" value=\"person\">\n<$set name=\"spouse\" value={{!!title}}>\n<$button tooltip=\"Create spouse\" actions=<<actions>>>\n{{$:/core/images/new-button}} create spouse <span style=\"font-weight:bold\"><<slist>></span>\n</$button></$set></$set></$vars><br><br/>\n\\end\n\n\\define set-tags() $(tags)$\n\\define set-spouse() [[$(spouse)$]]\n\\define actions()\n<$action-sendmessage $message=\"tm-new-tiddler\" title=<<title>> tags=<<set-tags>> spouse=<<set-spouse>> />\n\\end\n\n\\define appendfieldaction()\n<$action-listops $tiddler=<<title>> $field=\"spouse\" $subfilter=<<set-spouse>>/>\n\\end\n\n\\define showicon(icon)\n<span class=\"pview\">{{||$:/core/ui/TiddlerIcon}}</span>\n\\end\n\n\\define showsearchicon(icon)\n<span class=\"searchicon\">{{||$:/core/ui/TiddlerIcon}}</span>\n\\end\n\n\\define showsheeticon(icon)\n<span class=\"groupview\">{{||$:/core/ui/TiddlerIcon}}</span>\n\\end\n\n\\define prog(title)\n<progress value=<<getPersonScore \"\"\"$title$\"\"\">> max=\"100\"></progress>\n\\end\n\n\\define addbrackets(string)\n<$button class=\"tc-btn-invisible tc-tiddlylink\"><$action-setfield $tiddler=\"$:/plugin/cls/mk/export\" person1=\"[[$string$]]\" />\n<$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$button>\n\\end\n\n\\define pedigree(name)\n<$list filter=\"[[$name$]]\">\n<div class=\"events\">\n  <h3><$reveal type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal> Pedigree Chart</h3>\n  <table class=\"pedigree\">\n    <tbody>\n      <tr>\n        <th></th>\n        <th>Parents</th>\n        <th>Grand Parents</th>\n      </tr>\n      <tr class=\"prow\">\n        <td rowspan=\"4\" id=\"homePerson\" class=\"person line-bottom\"><$macrocall $name=showicon icon={{!!icon}}/><$reveal type=\"nomatch\" state=\"!!caption\" text=\"\"><$set name=\"mytitle\" value={{!!title}}><$macrocall $name=\"addbrackets\" string=<<mytitle>> /></$set></$reveal><$reveal tag=\"div\" class=\"cellname\" type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></td>\n<$list filter={{!!father}}>\n        <td rowspan=\"2\" id=\"Father\" class=\"person line-bottom\"><$macrocall $name=showicon icon={{!!icon}}/><$link to=<<currentTiddler>>><$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$link></td>\n<$list filter={{!!father}}>\n        <td id=\"Grandfather\" class=\"person grand line-bottom\"><$macrocall $name=showicon icon={{!!icon}}/><$link to=<<currentTiddler>>><$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$link></td>\n</$list></$list>\n        </tr>\n        <tr class=\"prow\">\n<$list filter={{!!father}}>\n<$list filter={{!!father}}>\n        <td class=\"bio grandDate line-left-down\">\n        <$macrocall $name=\"prog\" title={{!!title}}/>\n        <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n</$list></$list>\n      </tr>\n      <tr class=\"prow\">\n<$list filter={{!!father}}>\n      <td rowspan=\"2\" class=\"bio line-left-down\"><$macrocall $name=\"prog\" title={{!!title}}/>\n      <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n</$list>\n<$list filter={{!!father}}>\n<$list filter={{!!mother}}>\n      <td class=\"person line-bottom grand line-left-up\"><$macrocall $name=showicon icon={{!!icon}}/><$link to=<<currentTiddler>>><$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$link></td>\n</$list></$list>\n      </tr>\n      <tr class=\"prow\">\n<$list filter={{!!father}}>\n<$list filter={{!!mother}}>\n      <td class=\"bio grandDate line-left\"><$macrocall $name=\"prog\" title={{!!title}}/>\n      <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n</$list></$list>\n      </tr>\n      <tr class=\"prow\">\n      <td rowspan=\"4\" class=\"bio\"><$macrocall $name=\"prog\" title={{!!title}}/>\n      <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n<$list filter={{!!mother}}>\n      <td rowspan=\"2\" class=\"person line-bottom line-left-up\"><$macrocall $name=showicon icon={{!!icon}}/><$link to=<<currentTiddler>>><$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$link></td>\n</$list>\n<$list filter={{!!mother}}>\n<$list filter={{!!father}}>\n      <td class=\"person grand line-bottom\"><$macrocall $name=showicon icon={{!!icon}}/><$link to=<<currentTiddler>>><$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$link></td>\n</$list></$list>\n      </tr>\n      <tr class=\"prow\">\n<$list filter={{!!mother}}>\n<$list filter={{!!father}}>\n      <td class=\"bio grandDate line-left-down\"><$macrocall $name=\"prog\" title={{!!title}}/>\n      <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n</$list></$list>\n      </tr>\n      <tr class=\"prow\">\n<$list filter={{!!mother}}>\n      <td rowspan=\"2\" class=\"bio\"><$macrocall $name=\"prog\" title={{!!title}}/>\n      <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n</$list>\n<$list filter={{!!mother}}>\n<$list filter={{!!mother}}>\n      <td class=\"person grand line-bottom line-left-up\"><$macrocall $name=showicon icon={{!!icon}}/><$link to=<<currentTiddler>>><$reveal tag=\"div\" class=\"cellname\" type=\"nomatch\" state=\"!!caption\" text=\"\"><$macrocall $name=\"getName\" caption={{!!caption}} /></$reveal><$reveal type=\"match\" state=\"!!caption\" text=\"\"><$view field=\"title\"/></$reveal></$link></td>\n</$list></$list>\n      </tr>\n      <tr class=\"prow\">\n<$list filter={{!!mother}}>\n<$list filter={{!!mother}}>\n      <td class=\"bio grandDate line-left\"><$macrocall $name=\"prog\" title={{!!title}}/>\n      <$macrocall $name=getSubCaption caption={{!!caption}} /></td>\n</$list></$list>\n      </tr>\n    </tbody>\n  </table>\n</div>\n</$list>\n\\end\n\n\\define showmarriage(ospouse)\n<div class=\"events\"><$list filter=\"\n[tag[person]contains:spouse{!!title}sort[title]]\"><$link to=<<currentTiddler>>><$view field='title'/></$link> (<$list filter=\"\"\"[tag[event]tag[marriage]contains:people{!!title}contains:people[$ospouse$]]\"\"\"><$view field='date' /></$list>)<$list filter=\"\"\"[tag[event]tag[marriage]contains:people{!!title}contains:people[$ospouse$]]\"\"\"><$reveal state=\"!!divorced\" type=\"nomatch\" text=\"\"><span style=\"font-weight: bold; color: #71382a;\">; DIVORCED:</span> (<$view field='divorced' />)</$reveal></$list><br/></$list></div>\n\\end\n\n\\define showsheetmarriage(mspouse,ospouse)\n<div class=\"events\"><$list filter=\"\"\"[tag[event]tag[marriage]contains:people[$mspouse$]contains:people[$ospouse$]]\"\"\">m. <$view field='date' /><br/><$list filter={{!!place}}>{{!!title}}</$list></$list><$list filter=\"\"\"[tag[event]tag[marriage]contains:people[$mspouse$]contains:people[$ospouse$]]\"\"\"><$reveal state=\"!!divorced\" type=\"nomatch\" text=\"\"><span style=\"font-weight: bold; color: #71382a;\"> DIVORCED:</span> <$view field='divorced' /></$reveal><br/></$list></div>\n\\end\n\n\\define gsheet(person)\n<$list filter=\"[[$person$]]\"><br/><$macrocall $name=\"getName\" caption={{!!caption}} title={{!!title}} />\n<$list filter=\"[tag[event]tag[birth]contains:people{!!title}]\"><br/>b. <$view field='date'/><$list filter={{!!place}}><br/>{{!!title}}</$list></$list><$list filter=\"[tag[event]tag[death]contains:people{!!title}]\"><br/>d. <$view field='date'/><$list filter={{!!place}}><br/>{{!!title}}</$list></$list></$list>\n\\end\n\n\\define namesheet(person)\n<$list filter=\"[[$person$]]\"><$link to=<<currentTiddler>>><$macrocall $name=showsheeticon icon={{!!icon}}/></$link></$list>\n\\end\n\n<$reveal state=\"!!father\" text=\"\" type=\"nomatch\"><$reveal state=\"!!mother\" text=\"\" type=\"nomatch\"><$refresh><$macrocall $name=\"pedigree\" name={{!!title}} /></$refresh></$reveal></$reveal>\n<$reveal state=\"!!father\" text=\"\" type=\"nomatch\"><$reveal state=\"!!mother\" text=\"\" type=\"match\"><h3>Father</h3>\n<div class=\"events\"><$list filter={{!!father}}><$link to=<<currentTiddler>>><$view field='title'/></$link><br/></$list></div><br/></$reveal></$reveal>\n<$reveal state=\"!!father\" text=\"\" type=\"match\"><$reveal state=\"!!mother\" text=\"\" type=\"nomatch\"><h3>Mother</h3>\n<div class=\"events\"><$list filter=\n{{!!mother}}><$link to=<<currentTiddler>>><$view field='title'/></$link><br/></$list></div><br/></$reveal></$reveal>\n\n<$set name=\"ospouse\" value={{!!title}} >\n<div class=events style=\"color: red !important;\"><$set name=ot value={{!!title}}><$list filter={{!!spouse}} variable=slist>\n<$list filter=\"[tag[person]field:title<slist>!contains:spouse{!!title}sort[title]]\"><$macrocall $name=showno spouse={{!!title}}/></$list><$set name=per filter=\"[tag[person]search:title<slist>!has[draft.of]sort[title]]\">\n<$reveal text=\"\" default=<<per>> type=match><$macrocall $name=nospouse spouse=<<slist>>/></$reveal></$set></$list></$set></div></$set>\n<div style = \"display:block; clear:both; page-break-after:always;\"></div>\n<hr/>\n<div class=\"events\"><$list filter=\"[tag[person]contains:spouse{!!title}sort[title]]\" variable=theSpouse>\n<center><h3>Family Group Sheet</h3></center>\n<br/>\n<table class=\"groupsheet\"><tr style=\"border-width:0px; background:transparent\">\n<td width=30% style=\"font-size: 12px; text-align:right\"><br/><$macrocall $name=\"getName\" caption={{!!caption}} title={{!!title}} /><br/><$list filter=\"[tag[event]tag[birth]contains:people{!!title}]\">b. <$view field='date'/><$list filter={{!!place}}><br/>{{!!title}}</$list></$list><$list filter=\"[tag[event]tag[death]contains:people{!!title}]\"><br/>d. <$view field='date'/><$list filter={{!!place}}><br/>{{!!title}}</$list></$list></td>\n<td width=20%><div style=\"max-height:150px; overflow:hidden\"><span class=\"groupview\">{{||$:/core/ui/TiddlerIcon}}</span></div></td>\n<td width=20%><div style=\"max-height:150px; overflow:hidden\">\n<$macrocall $name=namesheet person=<<theSpouse>> />\n</div></td>\n<td style=\"font-size: 12px; width:30%\"><$macrocall $name=gsheet person=<<theSpouse>> />\n</td></tr></table>\n<center><$macrocall $name=\"showsheetmarriage\" mspouse={{!!title}} ospouse=<<theSpouse>> /></center><br/>\n\n<$set name=\"children\" filter=\"[tag[person]contains:father{!!title}contains:mother<theSpouse>]\" value=\"show\" emptyValue=\"\">\n<$reveal text=<<children>> type=\"match\" default=\"show\">\n<h3>Children</h3>\n<div class=\"events\"><table class=\"cls\" style=\"width:100%\"><tr><th style=\"width:20px\"></th><th>Birth order</th><th>Name</th><th>Birth</th><th>Death</th><th>Spouse(s)</th><th>Marriage date</th></tr><$list filter=\"[tag[person]contains:father{!!title}contains:mother<theSpouse>nsort[birthorder]]\">\n<tr><td><$macrocall $name=showsearchicon icon={{!!icon}}/></td><td><$view field='birthorder'/></td><td><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link></td><td><$list filter=\"[tag[event]tag[birth]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter=\"[tag[event]tag[death]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter={{!!spouse}}><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link><br/></$list></td>\n\n<td><$list filter={{!!spouse}}>\n<$list filter=\"[tag[marriage]contains:people{!!title}]\" emptyMessage=\"<br/>\">{{!!date}}<br/></$list></$list>\n</td>\n\n</tr>\n</$list></table></div></$reveal></$set>\n<$set name=\"children\" filter=\"[tag[person]contains:mother{!!title}contains:father<theSpouse>]\" value=\"show\" emptyValue=\"\">\n<$reveal text=<<children>> type=\"match\" default=\"show\">\n<h3>Children</h3>\n<div class=\"events\"><table class=\"cls\" style=\"width:100%\"><tr><th style=\"width:20px\"></th><th>Birth order</th><th>Name</th><th>Birth</th><th>Death</th><th>Spouse(s)</th><th>Marriage date</th></tr><$list filter=\"[tag[person]contains:mother{!!title}contains:father<theSpouse>nsort[birthorder]]\">\n<tr><td><$macrocall $name=showsearchicon icon={{!!icon}}/></td><td><$view field='birthorder'/></td><td><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link></td><td><$list filter=\"[tag[event]tag[birth]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter=\"[tag[event]tag[death]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter={{!!spouse}}><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link><br/></$list></td>\n\n<td><$list filter={{!!spouse}}>\n<$list filter=\"[tag[marriage]contains:people{!!title}]\" emptyMessage=\"<br/>\">{{!!date}}<br/></$list></$list>\n</td>\n\n</tr>\n</$list></table></div></$reveal></$set>\n\n</$list>\n\n<br/>\n<$set name=\"children\" filter=\"[tag[person]contains:father{!!title}!has:field[mother]]\" value=\"show\" emptyValue=\"\">\n<$reveal text=<<children>> type=\"match\" default=\"show\">\n<div class=\"events\"><table class=\"cls\" style=\"width:100%\"><tr><th>Birth order</th><th>Name</th><th>Birth</th><th>Death</th><th>Mother</th><th>Spouse(s)</th></tr><$list filter=\"[tag[person]contains:father{!!title}!has:field[mother]nsort[birthorder]]\">\n<tr><td><$view field='birthorder'/></td><td><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link></td><td><$list filter=\"[tag[event]tag[birth]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter=\"[tag[event]tag[death]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter={{!!mother}}><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link></$list></td>\n\n<td><$list filter={{!!spouse}}><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link><br/></$list></td>\n\n</tr>\n</$list></table></div></$reveal></$set>\n<$set name=\"children\" filter=\"[tag[person]contains:mother{!!title}!has:field[father]]\" value=\"show\" emptyValue=\"\">\n<$reveal text=<<children>> type=\"match\" default=\"show\">\n<div class=\"events\"><table class=\"cls\" style=\"width:100%\"><tr><th>Birth order</th><th>Name</th><th>Birth</th><th>Death</th><th>Father</th><th>Spouse(s)</th></tr><$list filter=\"[tag[person]contains:mother{!!title}!has:field[father]nsort[birthorder]]\">\n<tr><td><$view field='birthorder'/></td><td><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link></td><td><$list filter=\"[tag[event]tag[birth]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter=\"[tag[event]tag[death]contains:people{!!title}]\"><$view field='date'/></$list></td><td><$list filter={{!!father}}><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link></$list></td>\n\n<td><$list filter={{!!spouse}}><$link to=<<currentTiddler>>><$macrocall $name=getName caption={{!!caption}} title={{!!title}}/></$link><br/></$list></td>\n\n</tr>\n</$list></table></div></$reveal></$set>\n\n</div>","tags":"$:/tags/familyregister $:/tags/mk","title":"$:/plugins/cls/mk/pedigree","modified":"20230318003707351","caption":"Pedigree Chart"}]